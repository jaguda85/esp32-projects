---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const projects = (await getCollection('projects')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);

const getDifficultyClass = (difficulty: string) => {
  const map: Record<string, string> = {
    'Łatwy': 'difficulty-easy',
    'Średni': 'difficulty-medium',
    'Trudny': 'difficulty-hard'
  };
  return map[difficulty] || 'difficulty-medium';
};

const getProjectUrl = (slug: string) => {
  const base = import.meta.env.BASE_URL || '/';
  const baseWithSlash = base.endsWith('/') ? base : `${base}/`;
  return `${baseWithSlash}projects/${slug}`;
};

const getAssetPath = (path: string) => {
  const base = import.meta.env.BASE_URL || '/';
  const baseWithSlash = base.endsWith('/') ? base : `${base}/`;
  return `${baseWithSlash}${path}`;
};

// Redirect do /projects (główna będzie przekierowanie)
return Astro.redirect(getAssetPath('projects'));
---